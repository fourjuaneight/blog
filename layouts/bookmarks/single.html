{{ define "main" }}
  {{ $dTitle := cond (eq .Title "Tweets") "Tweet" "Title" }}
  {{ $dCreator := cond (eq .Title "Reddits") "Subreddit" "Creator" }}
  {{ $tableUrl := print "https://cleverlaziness.com/api/bookmarks/" (lower .Title) }}
  {{ $bookmarks := getJSON $tableUrl }}

  <section class="w-full">
    <h1 class="post-title md:text-6xl mb-1 mr-auto text-4xl">{{ .Title }}</h1>
    <p>{{ .Content }}</p>
    <ul class="flex flex-wrap items-center justify-start list-none mb-2 mx-0 mt-0 p-0 w-full">
      {{ range .Site.Data.nav.bookmarks }}
        {{ if ne .label $.Title }}
          <li class="mr-4 my-4">
            <a
              href='{{ .link | absURL }}'
              class="duration-200 ease-in-out font-mdNichrome no-underline text-3xl transition-color focus:text-secondary hover:text-secondary"
            >
              {{ .label }}
            </a>
          </li>
        {{ end }}
      {{ end }}
    </ul>
  </section>
  <section
    class="bk-table h-full overflow-x-auto overflow-y-hidden w-full"
    data-loaded="true"
  >
    <div class="w-full">
      <ul
        class="
          bk-header
          bg-background-dark
          border
          border-secondary
          border-solid
          grid
          grid-rows-1
          items-center
          justify-start
          list-none
          m-0
          p-0
          w-full
        "
      >
        <li
          class="
            bk-column-header
            col-start-1
            duration-200
            ease-in-out
            font-semibold
            m-0
            p-2
            text-xl
            w-full
          "
        >
          {{ $dTitle }}
        </li>
        <li
          class="
            bk-column-header
            col-start-2
            duration-200
            ease-in-out
            font-semibold
            m-0
            p-2
            text-xl
            w-full
          "
        >
          {{ $dCreator }}
        </li>
        <li
          class="
            bk-column-header
            col-start-3
            duration-200
            ease-in-out
            font-semibold
            m-0
            p-2
            text-xl
            w-full
          "
        >
          Tags
        </li>
      </ul>
      <ul
        class="
          bg-background-dark
          border
          border-secondary
          border-solid
          border-t-0
          flex
          flex-col
          items-start
          justify-start
          list-none
          m-0
          p-0
          relative
          w-full"
        data-category="{{ lower .Title }}"
      >
        {{ range $bookmarks }}
          {{ $bkTitle := cond (eq $.Title "Tweets") .tweet .title }}
          {{ $bkCreator := cond (eq $.Title "Reddits") .subreddit .creator }}
          <li
            class="bk-cell border-solid duration-200 ease-in-out grid grid-rows-1 m-0 p-0 transition-all w-full"
            data-dead="{{ .dead }}"
          >
            <a
              class="col-start-1 focus:no-underline hove:no-underline m-0 no-underline p-0 px-2 relative w-full whitespace-nowrap"
              href="{{ .url }}"
              target="_blank"
              rel="noopener noreferrer"
            >{{ $bkTitle }}</a>
            <p class="col-start-2 m-0 p-0 px-2 w-full">{{ $bkCreator }}</p>
            <p
              class="col-start-3 m-0 overflow-hidden p-0 px-2 w-full whitespace-nowrap"
              title='{{ delimit .tags ", " }}'
            >
              {{ delimit .tags ", " }}
            </p>
          </li>
        {{ end}}
      </ul>
    </div>
  </section>
  {{ if ne .Params.footer nil }}
    <section class="footer w-full">
      {{ partial "img.html" (dict "src" .Params.footer.img "alt" .Params.footer.alt) }}
    </section>
  {{ end }}
{{ end }}